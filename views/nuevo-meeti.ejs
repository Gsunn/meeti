<!-- Load Leaflet from CDN -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin="" />

<!-- Load Esri Leaflet Geocoder from CDN -->
<link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder@3.1.1/dist/esri-leaflet-geocoder.css"
    integrity="sha512-IM3Hs+feyi40yZhDH6kV8vQMg4Fh20s9OzInIIAc4nx7aMYMfo+IenRUekoYsHZqGkREUgx0VvlEsgm7nCDW9g=="
    crossorigin="">

<main class="contenedor contenedor-formularios">
    <h1>
        <%- nombrePagina %>
    </h1>
    <form class="default-form" action="/nuevo-meeti" method="POST">
        <legend>Sobre el Meeti</legend>
        <div class="campo">
            <label>Grupo</label>
            <select name="grupoId">
                <option value="" disabled selected>-- Selecciona Grupo --</option>
                <% if(grupos.length> 0 ) { %>
                    <% grupos.forEach(grupo=> {  %>
                        <option value="<%= grupo.id %>">
                            <%= grupo.nombre %>
                        </option>
                        <% }) %>
                            <% } %>
            </select>
        </div>
        <div class="campo">
            <label>Titulo</label>
            <input type="text" name="titulo" placeholder="Titulo Meeti">
        </div>
        <div class="campo">
            <label>Invitado</label>
            <input type="text" name="invitado" placeholder="Nombre Invitado o Ponente (si aplica)">
        </div>
        <div class="columnas-2 grid">
            <div class="campo">
                <label>Fecha</label>
                <input type="date" name="fecha" placeholder="Fecha Meeti">
            </div>
            <div class="campo">
                <label>Hora</label>
                <input type="time" name="hora" placeholder="Hora Meeti">
            </div>
        </div>
        <div class="campo">
            <label>Cupo</label>
            <input type="number" min="1" name="cupo" placeholder="Cupo Meeti (si aplica)">
        </div>
        <div class="campo descripcion">
            <label>Descripción</label>
            <div class="contenedor-editor">
                <input type="hidden" id="x" name="descripcion">
                <trix-editor input="x"></trix-editor>
            </div>
        </div>

        <legend>Ubicación Meeti</legend>

        <div class="campo buscador">
            <label>Coloca la Dirección del Meeti</label>
            <div class="contenedor-input">
                <input type="text" id="formbuscador" placeholder="Ubicación">
                <small>El asistente colocará una dirección estimada</small>
            </div>
        </div>

        <div class="campo mapa">
            <div id="mapa"></div>
            <p class="informacion">Mueve el Pin hacia el punto exacto en caso de ser necesario</p>
        </div>

        <p class="informacion">Confirma que los siguientes campos sean correctos:</p>
        <div class="campo">
            <label>Dirección</label>
            <input type="text" id="direccion" name="direccion" placeholder="Dirección">
        </div>
        <div class="campo">
            <label>Ciudad</label>
            <input type="text" id="ciudad" name="ciudad" placeholder="Ciudad">
        </div>
        <div class="campo">
            <label>Estado</label>
            <input type="text" id="estado" name="estado" placeholder="Estado">
        </div>
        <div class="campo">
            <label>País</label>
            <input type="text" id="pais" name="pais" placeholder="País">
        </div>
        <input type="hidden" id="lat" name="lat">
        <input type="hidden" id="lng" name="lng">
        <div class="campo enviar">
            <input type="submit" class="btn btn-rosa" value="Crear Meeti">
        </div>
    </form>
</main>


<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>

<script src="https://unpkg.com/esri-leaflet@3.0.2/dist/esri-leaflet.js"
    integrity="sha512-myckXhaJsP7Q7MZva03Tfme/MSF5a6HC2xryjAM4FxPLHGqlh5VALCbywHnzs2uPoF/4G/QVXyYDDSkp5nPfig=="
    crossorigin=""></script>


<script src="https://unpkg.com/esri-leaflet-geocoder@3.1.1/dist/esri-leaflet-geocoder.js"
    integrity="sha512-enHceDibjfw6LYtgWU03hke20nVTm+X5CRi9ity06lGQNtC9GkBNl/6LoER6XzSudGiXy++avi1EbIg9Ip4L1w=="
    crossorigin=""></script>

<script>
    console.log(L.version);
    console.log(L.esri.VERSION);

    const geocodeService = L.esri.Geocoding.geocodeService({
        apikey: 'AAPKee5e3ca5108b467e8f5a303b0d226e0aRE7NUoNfTwIUvUM4npC72c_xJIeGP7An4C5YLsk4s9dAOvcjQU0gRSxQofwdE_sD'
    });

</script>